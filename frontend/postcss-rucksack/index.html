<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="user-scalable=no width=device-width, initial-scale=1.0 maximum-scale=1.0"/><title></title><link rel="shortcut icon"/></head><body><div id="react-mount"><div class="wrapper" data-reactid=".1ouadvxbcao" data-react-checksum="1136757558"><div data-reactid=".1ouadvxbcao.0"><div data-reactid=".1ouadvxbcao.0.0"><div data-reactid=".1ouadvxbcao.0.0.0">
						<script type="application/ld+json">
								{
												"@context": "http://schema.org",
												"@type": "Article",
												"headline": "Работаем с Rucksack CSS",
												"datePublished": "2016-02-06T23:46:37.121Z",
												"dateModified": "2016-02-06T23:46:37.121Z",
												"description": "Не так давно решил, что нужно всё таки создать себе блог. Как и любой другой перфекционист я подошел к этому вопросу c особым интересом. В этой статье коротко расскажу о преимуществах PostCSS, а так же о Rucksack CSS - модуль PostCSS, который делает разработку менее болезненной.",
												"publisher": "Alexander Shelepenok",
												"inLanguage": "Russian",
												"author": {
																"@type": "Person",
																"name": "Alexander Shelepenok",
																"url": "http://ashk.io/",
																"sameAs": "http://ashk.io/"
												}
								}
						</script>
				</div><div data-reactid=".1ouadvxbcao.0.0.1"><a class="gohome" href="/mysites-blog/" data-reactid=".1ouadvxbcao.0.0.1.0"> All Articles</a></div><div class="blog-single" data-reactid=".1ouadvxbcao.0.0.2"><div class="text" data-reactid=".1ouadvxbcao.0.0.2.0"><h1 data-reactid=".1ouadvxbcao.0.0.2.0.0">Работаем с Rucksack CSS</h1><div data-reactid=".1ouadvxbcao.0.0.2.0.1"><p>Всем привет!</p>
<p>2 месяца назад я полностью отказался от препроцессоров в пользу постпроцессоров. В Stylus, SASS и LESS есть один существенный минус - все они монолитны. В тоже время, PostCSS обладает высокой модульностью и позволяет написать любой плагин для пост-обработки.</p>
<p>В своем блоге я уже использовал несколько плагинов. Например, <strong>LOST</strong> (построение всевозможных сеток), а так же <strong>Rucksack CSS</strong> (адаптивная типографика и нативный clearfix).</p>
<p><a href="https://simplaio.github.io/rucksack/">Rucksack CSS</a> – модуль PostCSS, представляет собой мешок крутых css-штук, которые делают разработку менее болезненной, что особенно важно в столь динамичном мире Front End.</p>
<h2>Установка</h2>
<p>Устанавливается, как обычно, через NPM.</p>
<p><code>npm install --save rucksack-css</code></p>
<h2>Интеграция</h2>
<p>Можно интегрировать с Gulp, Grunt, Broccoli, Stylus и PostCSS.</p>
<p>Лично я не использовал в блоге Gulp и Grunt, весь код собирает Webpack. Стили обрабатываются с помощью css-loader, style-loader и postcss-loader. Далее, всё выносится в отдельный .css файл с помощью extract-text-plugin.</p>
<p>Часть конфига, которая отвечает за интеграцию PostCSS и Rucksack c Webpack:</p>
<pre><code><span class="hljs-built_in">var</span> rucksack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'rucksack-css'</span>);
<span class="hljs-built_in">var</span> ExtractTextPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"extract-text-webpack-plugin"</span>);

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attribute">module</span>: {
  <span class="hljs-attribute">loaders</span>: [
    {
  	<span class="hljs-attribute">test</span>: /\.css$/,
  	<span class="hljs-attribute">loader</span>: ExtractTextPlugin.extract( <span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>, <span class="hljs-string">'postcss-loader'</span> )
    }
  ]
	  },
  <span class="hljs-attribute">postcss</span>: [
    rucksack({
      <span class="hljs-attribute">autoprefixer</span>: <span class="hljs-literal">true</span>
    })
  ],
  <span class="hljs-attribute">plugins</span>: [
    <span class="hljs-keyword">new</span> ExtractTextPlugin(<span class="hljs-string">"styles.css"</span>)
  ]
}
</code></pre>
<p>Думаю, всё понятно. В блоке postcss мы так же включаем <strong>Rucksack Autoprefixer</strong>. При последующей сборке все свойства Rucksack будут обработаны, а на выходе мы получим кроссбраузерые стили (styles.css).</p>
<p>Интеграция с <strong>Gulp</strong>. Используйте <a href="https://github.com/simplaio/gulp-rucksack">gulp-rucksack</a></p>
<pre><code><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
<span class="hljs-keyword">var</span> rucksack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-rucksack'</span>);

gulp.task(<span class="hljs-string">'rucksack'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">'src/styles.css'</span>)
    .pipe(rucksack())
    .pipe(gulp.dest(<span class="hljs-string">'styles.css'</span>));
});
</code></pre>
<p>Интеграция с <strong>Grunt</strong>. Используйте <a href="https://github.com/simplaio/grunt-rucksack">grunt-rucksack</a></p>
<pre><code><span class="hljs-built_in">require</span>(<span class="hljs-string">'load-grunt-tasks'</span>)(grunt);

grunt.initConfig({
    <span class="hljs-attribute">rucksack</span>: {
        <span class="hljs-attribute">compile</span>: {
            <span class="hljs-attribute">files</span>: {
                <span class="hljs-string">'style.css'</span>: <span class="hljs-string">'src/styles.css'</span>
            }
        }
    }
});
grunt.registerTask(<span class="hljs-string">'default'</span>, [<span class="hljs-string">'rucksack'</span>]);
</code></pre>
<p>Интеграция с <strong>Broccoli</strong>. Используйте <a href="https://github.com/simplaio/broccoli-rucksack">broccoli-rucksack</a></p>
<pre><code>var rucksack = require('broccoli-rucksack')<span class="hljs-comment">;</span>
tree = rucksack(<span class="hljs-name">tree</span>, [options])<span class="hljs-comment">;</span>
</code></pre>
<p>Для интеграции со <strong>Stylus</strong> можно воспользоваться плагином <a href="https://github.com/seaneking/poststylus">PostStylus</a></p>
<pre><code><span class="hljs-function"><span class="hljs-title">stylus</span><span class="hljs-params">(css)</span></span>.use(poststylus(<span class="hljs-string">'rucksack-css'</span>))
</code></pre>
<h2>Возможности</h2>
<p>Rucksack полностью модульный, вы можете добавить любую новую возможность, чтобы настроить всё под свои нужды. По умолчанию все основные функции доступны, но вы можете включать/отключать с помощью <code>True</code> <code>False</code>. Небольшой пример:</p>
<pre><code><span class="hljs-comment">// Set in build tool</span>
<span class="hljs-selector-tag">rucksack</span>({
  <span class="hljs-attribute">clearFix</span>: false,
  <span class="hljs-attribute">autoprefixer</span>: true
});
</code></pre>
<p>А вот и список всех дефолтных аддонов:</p>
<ul>
<li>responsiveType</li>
<li>shorthandPosition</li>
<li>quantityQueries</li>
<li>alias</li>
<li>inputPseudo</li>
<li>clearFix</li>
<li>fontPath</li>
<li>hexRGBA</li>
<li>easings</li>
</ul>
<p>Дополнительные аддоны. По умолчанию - <code>False</code></p>
<ul>
<li>fallbacks</li>
<li>autoprefixer</li>
</ul>
<p>В Webpack-конфиге я включил Autoprefixer, как вы уже видели.</p>
<p>Из всего этого в блоге были зайдействованы <code>clearFix</code> и <code>responsiveType</code>, поэтому ниже будут пару слов и примеры только по этим свойствам. Не менее интересные свойства можно найти в документации <a href="https://simplaio.github.io/rucksack/docs/">Rucksack</a>.</p>
<h3>Адаптивная типографика</h3>
<p>Адаптивный <code>font-size</code>, который реагирует на размер окна браузера. Всё выглядит так:</p>
<p><img src="./type-demo.gif" alt="Rucksack Responsive Typography"></p>
<h4>Быстрый старт</h4>
<pre><code><span class="hljs-selector-class">.foo</span> {
  <span class="hljs-attribute">font-size</span>: responsive;
}
</code></pre>
<p>Но, наверное, вы захотите добавить минимальный и максимальный размер шрифта.</p>
<pre><code><span class="hljs-built_in">font</span>-<span class="hljs-attribute">size</span>: responsive [min-<span class="hljs-built_in">font</span>-<span class="hljs-built_in">size</span>] [max-<span class="hljs-built_in">font</span>-<span class="hljs-built_in">size</span>]
<span class="hljs-built_in">font</span>-<span class="hljs-attribute">range</span>: [lower-bound] [upper-bound]
</code></pre>
<p><code>font-range</code> – это новое свойство, которое определяет области просмотра, между которыми шрифт будет адаптивным.  Устанавливаются мин / макс значения.</p>
<p>Небольшой пример:</p>
<pre><code><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">font-size</span>: responsive <span class="hljs-number">12px</span> <span class="hljs-number">21px</span>;
  <span class="hljs-attribute">font-range</span>: <span class="hljs-number">420px</span> <span class="hljs-number">1024px</span>;
}
</code></pre>
<p>Все значения могут быть в <code>px</code>, <code>rem</code> или <code>em</code>.</p>
<h4>Расширенный синтаксис</h4>
<pre><code><span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-size</span>: responsive;
  <span class="hljs-attribute">min-font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">max-font-size</span>: <span class="hljs-number">21px</span>;
  <span class="hljs-attribute">lower-font-range</span>: <span class="hljs-number">420px</span>;
  <span class="hljs-attribute">upper-font-range</span>: <span class="hljs-number">1280px</span>;
}
</code></pre>
<h4>Вывод</h4>
<p>Мы получаем font-size с использованием Calc, а так же размеры vw. Кроме этого, есть медиазапросы.</p>
<pre><code><span class="hljs-selector-tag">html</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">calc</span>(12px + 9 * ( (100vw - 420px) / <span class="hljs-number">860</span>));
}

@<span class="hljs-keyword">media</span> screen and (max-width: <span class="hljs-number">420px</span>) {
  <span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  }
}

@<span class="hljs-keyword">media</span> screen and (min-width: <span class="hljs-number">1280px</span>) {
  <span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">21px</span>;
  }
}
</code></pre>
<p>Что эквивалентно:</p>
<pre><code><span class="hljs-built_in">min</span>-<span class="hljs-built_in">size</span> + (<span class="hljs-built_in">min</span>-<span class="hljs-built_in">size</span> - <span class="hljs-built_in">max</span>-<span class="hljs-built_in">size</span>) * ( (<span class="hljs-number">100</span>vw - <span class="hljs-built_in">min</span>-<span class="hljs-built_in">width</span>) / ( <span class="hljs-built_in">max</span>-<span class="hljs-built_in">width</span> - <span class="hljs-built_in">min</span>-<span class="hljs-built_in">width</span>) )
</code></pre>
<p>Настройки по умолчанию:</p>
<pre><code><span class="hljs-built_in">min</span>-<span class="hljs-built_in">font</span>-size: 14px
<span class="hljs-built_in">max</span>-<span class="hljs-built_in">font</span>-size: 21px
lower-<span class="hljs-built_in">font</span>-<span class="hljs-built_in">range</span>: 420px
upper-<span class="hljs-built_in">font</span>-<span class="hljs-built_in">range</span>: 1280px
</code></pre>
<h3>Нативный ClearFix</h3>
<p>В Rucksack есть два новых метода – <code>fix-legacy</code> и <code>fix</code>. Оба этих метода достигают хорошего результата с различной кроссбраузерностью. <code>fix</code> выводит чистый код, это всё что необходимо для IE8+. <code>fix-legacy</code> поддерживает IE6/7.</p>
<h4>PostCSS</h4>
<pre><code><span class="hljs-selector-class">.foo</span> {
  <span class="hljs-attribute">clear</span>: fix;
}

<span class="hljs-selector-class">.bar</span> {
  <span class="hljs-attribute">clear</span>: fix-legacy;
}
</code></pre>
<h4>Вывод CSS</h4>
<pre><code><span class="hljs-comment">/* fix */</span>
<span class="hljs-selector-class">.foo</span><span class="hljs-selector-pseudo">:after</span>{
  <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
  <span class="hljs-attribute">display</span>: table;
  <span class="hljs-attribute">clear</span>: both;
}

<span class="hljs-comment">/* fix-legacy */</span>
<span class="hljs-selector-class">.bar</span><span class="hljs-selector-pseudo">:before</span>,
<span class="hljs-selector-class">.bar</span><span class="hljs-selector-pseudo">:after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">''</span>;
  <span class="hljs-attribute">display</span>: table;
}
<span class="hljs-selector-class">.bar</span><span class="hljs-selector-pseudo">:after</span> {
  <span class="hljs-attribute">clear</span>: both;
}
<span class="hljs-selector-class">.bar</span> {
  <span class="hljs-attribute">zoom</span>: <span class="hljs-number">1</span>;
}
</code></pre>
</div><em data-reactid=".1ouadvxbcao.0.0.2.0.2"><span data-reactid=".1ouadvxbcao.0.0.2.0.2.0">Published </span><span data-reactid=".1ouadvxbcao.0.0.2.0.2.1">7 Feb 2016</span></em></div><div class="footer" data-reactid=".1ouadvxbcao.0.0.2.1"><noscript data-reactid=".1ouadvxbcao.0.0.2.1.0"></noscript><p data-reactid=".1ouadvxbcao.0.0.2.1.1"><strong data-reactid=".1ouadvxbcao.0.0.2.1.1.0">Alexander Shelepenok</strong><span data-reactid=".1ouadvxbcao.0.0.2.1.1.1"> © All rights reserved. </span><a href="https://twitter.com/truewpioneer" data-reactid=".1ouadvxbcao.0.0.2.1.1.2">wpioneer on Twitter</a></p></div></div></div></div><script data-reactid=".1ouadvxbcao.1"></script></div></div><link rel="stylesheet" href="/mysites-blog/styles.css"/><script src="/mysites-blog/bundle.js"></script></body></html>